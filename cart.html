<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Cart - Learn & Shop Cart</title>
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;600;700&display=swap" rel="stylesheet">
  
  <style>
     /* General Reset */
* {
  box-sizing: border-box;
  font-family: 'Poppins', sans-serif;
}

 body {
  background: #f8faff;
  display: flex;
  justify-content: center;
  align-items: center;
  min-height: 100vh;
  padding: 1rem;
} 

.section {
  width: 100%;
  max-width: 720px;
  text-align: center;
}

h2 {
  color: #0b84ff;
  margin-bottom: 1.5rem;
}

/* Card container */
.card {
  background: white;
  padding: 1.5rem;
  border-radius: 16px;
  box-shadow: 0 4px 12px rgba(0,0,0,0.1);
  overflow-x: auto;
}

/* Table styling */
.cart-table {
  width: 100%;
  border-collapse: collapse;
}

.cart-table th, .cart-table td {
  padding: 12px 8px;
  border-bottom: 1px solid #eee;
  text-align: center;
}

/* Thumbnail inside table */
.cart-item {
  display: flex;
  align-items: center;
  gap: 12px;
}

.cart-item img {
  width: 64px;
  height: 64px;
  object-fit: cover;
  border-radius: 8px;
  box-shadow: 0 4px 12px rgba(0,0,0,0.06);
}

.cart-table th {
  background-color: #f0f7ff;
  color: #333;
}

.cart-total {
  text-align: right;
  margin-top: 1rem;
  font-size: 1.1rem;
}

/* Buttons */
.btn {
  background: #ddd;
  border: none;
  border-radius: 8px;
  padding: 10px 18px;
  cursor: pointer;
  transition: 0.3s;
}

.btn:hover {
  background: #ccc;
}

.btn.primary {
  background: #0b84ff;
  color: white;
}

.btn.primary:hover {
  background: #0866d9;
}

/* Remove button */
.remove {
  background: #ff4d4d;
  color: white;
  border: none;
  padding: 6px 10px;
  border-radius: 6px;
  cursor: pointer;
  font-size: 0.9rem;
}

.remove:hover {
  background: #e63939;
}

/* Responsive */
@media (max-width: 600px) {
  .cart-table th, .cart-table td {
    font-size: 0.9rem;
  }

  .btn {
    padding: 8px 12px;
  }
}

  </style>
</head>
<body>
  <main class="section">
    <h2>Your Cart</h2>
    <div class="card" id="cartContainer"></div>

    <div style="margin-top:12px; display:flex; gap:10px; justify-content:center;">
      <button id="clearCart" class="btn">Clear Cart</button>
      <button id="checkout" class="btn primary">Checkout</button>
    </div>
  </main>

  <script>
    // === CART FUNCTIONS ===
    function getCart() {
      return JSON.parse(localStorage.getItem('cart') || '[]');
    }

    function saveCart(cart) {
      localStorage.setItem('cart', JSON.stringify(cart));
    }

    // === RENDER CART PAGE ===
    function renderCartPage() {
      const ctn = document.getElementById('cartContainer');
      const cart = getCart();

      if (cart.length === 0) {
        ctn.innerHTML = '<p>Your cart is empty ðŸ›’</p>';
        return;
      }

      let html = `
        <table class="cart-table">
          <thead>
            <tr>
              <th>Item</th>
              <th>Qty</th>
              <th>Unit</th>
              <th>Subtotal</th>
              <th></th>
            </tr>
          </thead>
          <tbody>
      `;

      let total = 0;
      cart.forEach((item, idx) => {
        const price = Number(item.price || 0);
        const qty = Number(item.qty || 1);
        const subtotal = price * qty;
        total += subtotal;
        const img = item.image || 'https://via.placeholder.com/160?text=No+Img';

        html += `
          <tr>
            <td style="text-align:left">
              <div class="cart-item">
                <img src="${img}" alt="${(item.title||item.id)}" />
                <div>
                  <div style="font-weight:600">${item.title || item.id}</div>
                  <div style="font-size:13px;color:#666">${item.description || ''}</div>
                </div>
              </div>
            </td>
            <td>${qty}</td>
            <td>â‚¹${price.toFixed(2)}</td>
            <td>â‚¹${subtotal.toFixed(2)}</td>
            <td><button data-idx="${idx}" class="remove">Remove</button></td>
          </tr>
        `;
      });

      html += `
        </tbody>
        </table>
        <div class="cart-total">Total: <strong>â‚¹${total.toFixed(2)}</strong></div>
      `;

      ctn.innerHTML = html;

      // Remove button event
      document.querySelectorAll('.remove').forEach(btn => {
        btn.addEventListener('click', e => {
          const idx = +e.target.dataset.idx;
          const arr = getCart();
          arr.splice(idx, 1);
          saveCart(arr);
          renderCartPage();
        });
      });
    }

    // === CLEAR CART ===
    document.getElementById('clearCart').addEventListener('click', () => {
      saveCart([]);
      renderCartPage();
    });

    // === CHECKOUT ===
    document.getElementById('checkout').addEventListener('click', () => {
      const cart = getCart();
      if (cart.length === 0) {
        alert('Your cart is empty!');
        return;
      }
      alert('âœ… Checkout simulated! Thank you for your purchase.');
      saveCart([]);
      renderCartPage();
    });

    // === INITIAL RENDER ===
    renderCartPage();
  </script>
</body>
</html>
