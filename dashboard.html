<!doctype html>
<html lang="en">

<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Dashboard - Learn & Shop Cart</title>
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;600;700&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="style.css">
  <script defer src="script.js"></script>
</head>

<body>
  <main class="section">
    <h2 id="welcome">Dashboard</h2>
    <div class="tabs card" style="padding:12px;max-width:900px">
      <button id="tabCourses" class="btn">My Courses</button>
      <button id="tabOrders" class="btn">My Orders</button>
      <button id="tabProfile" class="btn">Profile</button>
      <div id="tabContent" style="margin-top:12px"></div>
    </div>
  </main>

  <script>
    function showTab(name) {
      const content = document.getElementById('tabContent'); const user = JSON.parse(localStorage.getItem('currentUser') || 'null'); if (!user) { alert('Please login'); location.href = 'login.html'; return; }
      if (name === 'courses') { const enrolled = user.enrolled || []; content.innerHTML = '<h3>Enrolled Courses</h3>' + (enrolled.length ? '<ul>' + enrolled.map(id => '<li>' + id + '</li>').join('') + '</ul>' : '<p>No courses yet</p>'); }
      if (name === 'orders') { content.innerHTML = '<h3>Orders</h3><p>None (simulated)</p>'; }
      if (name === 'profile') { content.innerHTML = `<h3>Profile</h3><p>Name: <input id="profName" value="${user.name}"/></p><p>Email: <input id="profEmail" value="${user.email}"/></p><p><button id="saveProfile" class="btn primary">Save</button> <button id="logoutBtn" class="btn">Logout</button></p>`; document.getElementById('saveProfile').addEventListener('click', () => { const users = JSON.parse(localStorage.getItem('users') || '[]'); const u = users.find(x => x.email === user.email); u.name = document.getElementById('profName').value; u.email = document.getElementById('profEmail').value; localStorage.setItem('users', JSON.stringify(users)); localStorage.setItem('currentUser', JSON.stringify(u)); alert('Saved'); location.reload(); }); document.getElementById('logoutBtn').addEventListener('click', () => { window.__LSApp.logout(); location.href = 'index.html'; }); }
    }
    document.getElementById('tabCourses').addEventListener('click', () => showTab('courses'));
    document.getElementById('tabOrders').addEventListener('click', () => showTab('orders'));
    document.getElementById('tabProfile').addEventListener('click', () => showTab('profile'));
    const u = JSON.parse(localStorage.getItem('currentUser') || 'null'); if (u) document.getElementById('welcome').textContent = 'Welcome, ' + u.name.split(' ')[0];
  </script>
</body>

</html>